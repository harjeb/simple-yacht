# 系统模式和最佳实践

## 状态管理模式

### Riverpod 使用原则
- 使用 ref.watch() 监听状态变化
- 使用 ref.read() 执行一次性操作
- 适当使用 autoDispose 避免内存泄漏

## 错误处理模式

### 分层错误处理
1. 服务层: 捕获原始异常
2. 状态层: 转换为应用错误
3. UI层: 显示用户友好消息

## 数据同步模式

### 本地优先策略
- 优先读取本地缓存
- 后台同步到 Firestore
- 冲突时服务端数据优先
